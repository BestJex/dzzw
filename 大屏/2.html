<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/echarts.js"></script>
</head>
<body>
<div id="container1" style="width: 500px;height: 500px">

</div>
</body>
<script>
    //地图
    var datamap=[
        {name: '金牛区', value: 20057.34},
        {name: '青羊区', value: 15477.48},
        {name: '武侯区', value: 31686.1},
        {name: '锦江区', value: 15477.48},
        {name: '高新区', value: 31686.1},
        {name: '成华区', value: 31686.1}
    ];  //各个区县数据
    var JNData =[
        [{name:'金牛区'}, {name:'青羊区',value:95}],
        [{name:'金牛区'}, {name:'武侯区',value:90}],
        [{name:'金牛区'}, {name:'成华区',value:80}],
        [{name:'金牛区'}, {name:'高新区',value:80}],
        [{name:'金牛区'}, {name:'锦江区',value:80}]
    ];
    var QYData =[
        [{name:'青羊区'}, {name:'金牛区',value:95}]
    ];
    var WHData =[
        [{name:'武侯区'}, {name:'金牛区',value:95}]
    ];
    var GXData =[
        [{name:'高新区'}, {name:'金牛区',value:95}]
    ];
    var CHData =[
        [{name:'成华区'}, {name:'金牛区',value:80}]
    ];
    var JJData =[
        [{name:'锦江区'}, {name:'金牛区',value:80}]
    ];
    var geoCoordMap = {
        "金牛区":[104.043487,30.722058],
        "青羊区":[103.955731,30.687648],
        "武侯区": [104.00167,30.630862],
        "高新区": [104.05167,30.580862],
        "成华区":[104.143077,30.690275],
        "锦江区":[104.120989,30.607689]
    };
    //飞机路线
    /* 	var BJData = [
     [{name:'高新区'}, {name:'都江堰市',value:90}],
     [{name:'高新区'}, {name:'郫县',value:70}]
     ]; */



    var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';
    //循环方法，放入数据data
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push({
                    fromName: dataItem[0].name,
                    toName: dataItem[1].name,
                    coords: [fromCoord, toCoord]
                });
            }
        }
        return res;
    };
    //线条一，闪光线条
    var color = ['#a6c84c', '#eb070b', '#eb070b', '#eb070b', '#eb070b', '#eb070b'];
    var series = [];
    [['chengdu', JNData], ['chengdu', WHData], ['chengdu', GXData], ['chengdu',CHData], ['chengdu',QYData], ['chengdu',JJData]].forEach(function (item, i) {
        series.push({
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                //线条2，飞机和路线
                {
                    name: null,
                    type: 'lines',
                    zlevel: 2,
                    symbol: ['none', 'arrow'],
                    symbolSize: 8,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0,
                        symbol: 'arrow',
                        symbolSize: 8
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 1,
                            opacity: 0.6,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                //特效，涟漪光圈
                {
                    name: null,
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show:false,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function (val) {
                        return val[2] / 8;
                    },
                    itemStyle: {
                        normal: {
                            color: color[i]
                        }
                    },
                    data: item[1].map(function (dataItem) {
                        return {
                            name: dataItem[1].name,
                            value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                        };
                    })
                }
        );
    });


    $.getJSON('chengdu1.json', function (data) {
        echarts.registerMap('chengdu', data);
        var chart = echarts.init(document.getElementById('container1'));


        chart.setOption( {
            layoutCenter: ['60%', '50%'],
            tooltip: {
                trigger: 'item'
                // formatter: '{b}<br/>{c} (项)'
            },
            geo: {
                map: 'chengdu',
                center: [104.00, 30.65],
                aspectScale:1.4,
                zoom:0.9,
                scaleLimit:{min:0.5,max:100},  //放大缩小级别
                roam:true,  //缩放，
                selectedMode : 'single',  //点击事件
                label: {
                    normal: {
                        show:false,
                        fontSize:10

                    }
                },
                itemStyle:{
                    normal:{
                        areaColor:'rgba(255, 255, 255, 0)',
                        borderColor:'rgba(255, 255, 255, 0.9)'
                    },
                    emphasis:{
//                        areaColor:'#03b9ed',
                        areaColor:'rgba(25, 43, 103, 1)'
                    }
                }
            },

            series: series
        });

    })
</script>
</html>