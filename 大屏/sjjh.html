<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>政务集中机房</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/zwjzjf.css">
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/echarts.js"></script>
    <!--文字向上滚动-->
    <link rel="stylesheet" href="css/liMarquee.css">
    <script src="js/jquery.liMarquee.js"></script>
    <style>
        .sjjhDp_dowebok { width:96%; height: 240px;margin: 15px auto 0; font-size: 14px;overflow:hidden}

        .sjjhDp_dowebok .sjjhDp_lists { margin: 0; line-height: 30px;}

    </style>
</head>
<body class="sjjhDp_bg">
<div class="zwjzjf-head">
    <p>成都市电子政务公共平台资源管理与服务系统</p>
</div>
<div class="zwjzjf_Box">
    <div class="zwjzjf_BOxleft1 public_left">
        <div class="zwjzjf_boxtitles">
            <span class="zwjzjf_boxtitle">基本信息</span>
        </div>
        <!--建设信息-->
        <div class="zwjzjf_BOx_boxs zwjzjf_BOx_box1">
            <div class="zwjzjf_boxtitle1">服务信息 </div>
            <div class="zwjzjf_BOx_boxs_1">
                <div class="zwjzjf_BOxboxs_left1 public_left">
                    <p class="zwjzjf_tetle background_99b7ea">接入部门</p>
                    <p class='zwjzjf_tetle1'><b class='zwjzjf_b'>100</b><span class='zwjzjf_span'>个</span></p>
                </div>
                <div class="zwjzjf_BOxboxs_left1 public_right">
                    <p class="zwjzjf_tetle background_99b7ea">接入系统</p>
                    <p class='zwjzjf_tetle1'><b class='zwjzjf_b'>100</b><span class='zwjzjf_span'>套</span></p>
                </div>
            </div>
        </div>
        <!--机房设备数量-->
        <div class="zwjzjf_BOx_boxs zwjzjf_BOx_box2">
            <div class="zwjzjf_boxtitle1">采集数据概况</div>
            <div id="echart1" style="width:100%;height:280px;"></div>

        </div>
        <!--机房接入情况-->
        <div class="zwjzjf_BOx_boxs zwjzjf_BOx_box3">
            <div class="zwjzjf_boxtitle1">共享数据概况 </div>
            <div id="echart2" style="width:100%;height:280px;"></div>
        </div>

    </div>
    <!--content-->
    <div class="zwjzjf_BOxleft2 public_left">
        <div class="zwjzjf_region">
            <div  class="aStyleSub">
                <!--数据采集量-->
                <div class="sjjhdp_sjcj">
                    数据采集总量
                </div>
                <div class="sjjhdp_sjcj_span">
                    <span>4</span>
                    <span>7</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                </div><!--数据采集量-->
                <div class="sjjhdp_sjgx">
                    数据共享总量
                </div>
                <div class="sjjhdp_sjgx_span">
                    <span>4</span>
                    <span>7</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                    <span>6</span>
                </div>
                <!--地图-->
                <div id="container1" style="width:100%;height:100%;color: white"></div>
            </div>
            <!--表格-->
            <div class="zwjzjf_region_1">
                <div class="zwjzjf_region_1Left public_left">
                    <div class="zwjzjf_region_1Left_text">
                        <div class="zwjzjf_region_1Left_text1">
                            交换趋势图
                        </div>
                    </div>
                </div>
                <div class="zwjzjf_region_1Right public_right">
                    <div id="echart4" style="width:100%;height:280px;"></div>
                </div>
            </div>



        </div>



    </div>
    <!--right-->

    <div class="zwjzjf_BOxleft3 public_right">
        <!--运维信息-->
        <div class="zwjzjf_boxtitles">
            <span class="zwjzjf_boxtitle">运维信息</span>
        </div>
        <!--前置机运行状态-->
        <div class="zwjzjf_BOx_boxs ">
            <div class="zwjzjf_boxtitle1 zwjzjf_boxtitle1s">前置机运行状态</div>
            <div class="sjjhDp_dowebok">
                <ul class="sjjhDp_lists">
                    <li class="sjjhDp_li">
                       <span><img src="images/sjjh_dp_yx1.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zc">正常</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx2.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_yc">异常</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx1.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zc">正常</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>
                    <li class="sjjhDp_li">
                        <span><img src="images/sjjh_dp_yx3.png"  alt=""></span><span>2017/04/19</span><span>18:11:20</span><span>市地质局前置机</span><span class="sjjhDp_zz">终止</span>
                    </li>

                </ul>
            </div>

        </div>
        <!--故障统计-->
        <div class="zwjzjf_BOx_boxs ">
            <div class="zwjzjf_boxtitle1 zwjzjf_boxtitle1s">故障统计</div>

            <div id="echart3" style="width:100%;height:280px;"></div>
        </div>
        <!--巡检统计-->
        <div class="zwjzjf_BOx_boxs ">
            <div class="zwjzjf_boxtitle1 zwjzjf_boxtitle1s">巡检统计</div>
            <div class="sjjhDp_box">
                <div class="sjjhDp_box_left public_left">
                    220
                </div>
                <div class="sjjhDp_box_left public_left">228</div>
                <div class="sjjhDp_box_left public_left">232</div>
            </div>
            <div class="sjjhDp_box1">
                <div class="sjjhDp_box1_left public_left">
                    本年巡检次数
                </div>
                <div class="sjjhDp_box1_left public_left">本季巡检次数 </div>
                <div class="sjjhDp_box1_left public_left">本月巡检次数 </div>
            </div>
        </div>

    </div>
</div>
</body>
<script>
    $('#mask').css({height:$(document.body).height()});
    //机房统计信息
    var zwjzjf_span=$('.zwjzjf_titles_click1 span');
    zwjzjf_span.click(function () {
        var index = $(this).index();  //1
        if(index>=0){
            zwjzjf_span.removeClass('zwjzjf_titles_stack')
        }
        zwjzjf_span.eq(index).addClass('zwjzjf_titles_stack').siblings('.zwjzjf_titles_1 ').removeClass('zwjzjf_titles_stack');
        return false;

    });
    //列表信息
    var zwjzjf_span2=$('.zwjzjf_titles_click2 span');
    zwjzjf_span2.click(function () {
        var index = $(this).index();  //1
        if(index>=0){
            zwjzjf_span2.removeClass('zwjzjf_titles_stack')
        }
        zwjzjf_span2.eq(index).addClass('zwjzjf_titles_stack').siblings('.zwjzjf_titles_1 ').removeClass('zwjzjf_titles_stack');
        return false;

    });

    var myChart1 = echarts.init(document.getElementById('echart1'));
    var myChart2 = echarts.init(document.getElementById('echart2'));
    var myChart3 = echarts.init(document.getElementById('echart3'));
    var myChart4 = echarts.init(document.getElementById('echart4'));
    //采集数据概况
    var option1 = {
        tooltip: {
            trigger: 'item',
            formatter: "{b}: {c}:({d}%)"
        },
        legend: {
            orient: 'horizontal',
            x:'center',
            y: 'bottom',
            data:['前置总量 ','接口总量 '],
            textStyle:{    //图例文字的样式
                color:'white',
                fontSize:10
            }
        },
        color:['#1eb577','#4f83da'],
        series: [
            {
                name:'',
                type:'pie',
                selectedMode: 'single',
                radius: [0, '60%'],
                data:[
                    {value:335, name:'前置总量'},
                    {value:679, name:'接口总量'}
                ],
                itemStyle:{
                    normal:{
                        label:{
                            show: true,
                            formatter: '{b}: {c}',
                            textStyle:{
                                fontSize:10,
                                color:'white'
                            }
//                            position : 'inner'
                        },
                        labelLine :{show:true}
                    }
                }
            }
        ]
    };
    //共享数据概况
    var option2 = {
        tooltip : {
            trigger: 'item',
            formatter: "{b} : {c}"
        },
        legend: {
            orient: 'horizontal',
            x:'center',
            y: 'bottom',
            data:['前置总量','接口总量'],
            textStyle:{    //图例文字的样式
                color:'white'
            }
        },
        color:['#1eb577','#4f83da'],
        series: [
            {
                name:'',
                type:'pie',
                selectedMode: 'single',
                radius: [0, '60%'],
                data:[
                    {value:335, name:'前置总量'},
                    {value:679, name:'接口总量'}
                ],
                itemStyle:{
                    normal:{
                        label:{
                            show: true,
                            formatter: '{b}: {c}',
                            textStyle:{
                                fontSize:10,
                                color:'white'
                            }
                        },
                        labelLine :{show:true}
                    }
                }
            }
        ]
    };
    //故障统计
    var  option3= {
        tooltip : {
            trigger: 'item',
            formatter: "{b} : {c}"
        },
        legend: {
//        show:false,
            orient: 'horizontal',
            x:'center',
            y: 'bottom',
            data:['交换适配器故障','前置机服务器故障','网络故障'],
            textStyle:{    //图例文字的样式
                color:'white'
            }
        },
        color:['#4f83da','#8170ef','#1eb577'],
        series : [
            {   name:'',
                type:'pie',
                radius : [20, 100],
                center : ['50%', '50%'],
                roseType : 'radius',
                data:[
                    {value:400,
                        name:'交换适配器故障'
                    },
                    { value:200,
                        name:'前置机服务器故障'
                    },
                    { value:200,
                        name:'网络故障'
                    }
                ],
                itemStyle:{
                    normal:{
                        label:{
                            show: true,
                            formatter: '{d}%',
                            textStyle:{
                                fontSize:12,
                                color:'white'
                            },
                            position : 'inner'
                        },
                        labelLine :{show:true}
                    }
                }
            }
        ]
    };
//交换趋势图
    var option4 = {
    tooltip : {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            label: {
                backgroundColor: '#6a7985'
            }
        }
    },
    legend: {
        x:"right",
        data:['采集量 ','共享集'],
        textStyle:{    //图例文字的样式
            color:'white',
            fontSize:10
        }
    },

    xAxis : [
        {
            type : 'category',
            data : ['2017-3-1','2017-3-2','2017-3-3','2017-3-4','2017-3-5','2017-3-6','2017-3-7'],
            axisLine:{
                lineStyle:{
                    color:'white'
                }
            }
        }
    ],
    yAxis : [
        {
            type : 'value',
            name:'数据/万条',
            axisLabel : {
                formatter: '{value}'
            },
            axisLine:{
                lineStyle:{
                    color:'white'
                }
            }
        }
    ],
    color:['#296e96','#ff2c54'],
    series : [
        {
            name:'采集量 ',
            type:'line',
            smooth: true,
            areaStyle: {normal: {}},
            data:[120, 132, 101, 134, 90, 230, 210]
        },
        {
            name:'共享集',
            type:'line',
            smooth: true,
//            areaStyle: {normal: {}},
            data:[20, 182, 91, 234, 20, 330, 310]
        }
    ]
};
    myChart1.setOption(option1);
    myChart2.setOption(option2);
    myChart3.setOption(option3);
    myChart4.setOption(option4);


    //ul滚动
    $(function(){
        $('.sjjhDp_dowebok').liMarquee({
            direction: 'up'
        });
    });


    //地图
    var datamap=[
        {name: '金牛区', value: 20057.34},
        {name: '青羊区', value: 15477.48},
        {name: '武侯区', value: 31686.1},
        {name: '锦江区', value: 15477.48},
        {name: '高新区', value: 31686.1},
        {name: '成华区', value: 31686.1}
    ];  //各个区县数据
    var JNData =[
        [{name:'金牛区'}, {name:'青羊区',value:95}],
        [{name:'金牛区'}, {name:'武侯区',value:90}],
        [{name:'金牛区'}, {name:'成华区',value:80}],
        [{name:'金牛区'}, {name:'高新区',value:80}],
        [{name:'金牛区'}, {name:'锦江区',value:80}]
    ];
    var QYData =[
        [{name:'青羊区'}, {name:'金牛区',value:95}]
    ];
    var WHData =[
        [{name:'武侯区'}, {name:'金牛区',value:95}]
    ];
    var GXData =[
        [{name:'高新区'}, {name:'金牛区',value:95}]
    ];
    var CHData =[
        [{name:'成华区'}, {name:'金牛区',value:80}]
    ];
    var JJData =[
        [{name:'锦江区'}, {name:'金牛区',value:80}]
    ];
    var geoCoordMap = {
        "金牛区":[104.043487,30.722058],
        "青羊区":[103.955731,30.687648],
        "武侯区": [104.00167,30.630862],
        "高新区": [104.05167,30.580862],
        "成华区":[104.143077,30.690275],
        "锦江区":[104.120989,30.607689]
    };


    var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';
    //循环方法，放入数据data
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var dataItem = data[i];
            var fromCoord = geoCoordMap[dataItem[0].name];
            var toCoord = geoCoordMap[dataItem[1].name];
            if (fromCoord && toCoord) {
                res.push({
                    fromName: dataItem[0].name,
                    toName: dataItem[1].name,
                    coords: [fromCoord, toCoord]
                });
            }
        }
        return res;
    };
    //线条一，闪光线条
    var color = ['#a6c84c', '#eb070b', '#eb070b', '#eb070b', '#eb070b', '#eb070b'];
    var series = [];
    [['chengdu', JNData], ['chengdu', WHData], ['chengdu', GXData], ['chengdu',CHData], ['chengdu',QYData], ['chengdu',JJData]].forEach(function (item, i) {
        series.push({
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },{
                    name: item[0] + ' Top10',
                    type: 'lines',
                    zlevel: 1,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0.7,
                        color: '#fff',
                        symbolSize: 3
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 0,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                //线条2，飞机和路线
                {
                    name: null,
                    type: 'lines',
                    zlevel: 2,
                    symbol: ['none', 'arrow'],
                    symbolSize: 8,
                    effect: {
                        show: true,
                        period: 6,
                        trailLength: 0,
                        symbol: 'arrow',
                        symbolSize: 8
                    },
                    lineStyle: {
                        normal: {
                            color: color[i],
                            width: 1,
                            opacity: 0.6,
                            curveness: 0.2
                        }
                    },
                    data: convertData(item[1])
                },
                //特效，涟漪光圈
                {
                    name: null,
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    zlevel: 2,
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    label: {
                        normal: {
                            show:false,
                            position: 'right',
                            formatter: '{b}'
                        }
                    },
                    symbolSize: function (val) {
                        return val[2] / 8;
                    },
                    itemStyle: {
                        normal: {
                            color: color[i]
                        }
                    },
                    data: item[1].map(function (dataItem) {
                        return {
                            name: dataItem[1].name,
                            value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
                        };
                    })
                }
        );
    });


    $.getJSON('chengdu1.json', function (data) {
        echarts.registerMap('chengdu', data);
        var chart = echarts.init(document.getElementById('container1'));


        chart.setOption( {
            layoutCenter: ['0%', '50%'],
            tooltip: {
                trigger: 'item'
                // formatter: '{b}<br/>{c} (项)'
            },
            geo: {
                map: 'chengdu',
                center: [104.00, 30.65],
                aspectScale:1.4,
                zoom:0.9,
                scaleLimit:{min:0.5,max:100},  //放大缩小级别
                roam:true,  //缩放，
                selectedMode : 'single',  //点击事件
                label: {
                    emphasis: {
                        show:true,

                        textStyle:{
                            fontSize:30,
                            color:'white'
                        }

                    },
                    normal: {
                        show:true,
                        fontSize:50,
                        textStyle:{
                            fontSize:16,
                            color:'white'
                        }

                    }
                },
                itemStyle:{
                    normal:{
                        areaColor:'rgba(255, 255, 255, 0)',
                        borderColor:'rgba(255, 255, 255, 0.9)'
                    },
                    emphasis:{
//                        areaColor:'#03b9ed',
                        areaColor:'rgba(25, 43, 103, 1)'
                    }
                }
            },

            series: series
        });

    })
</script>
</html>